function getPerformanceTiming(){var e=performance.timing;if(!e)return{raw:{},calcData:{}};let n=[{key:"Redirect",desc:"网页重定向的耗时",value:e.redirectEnd-e.redirectStart},{key:"AppCache",desc:"检查本地缓存的耗时",value:e.domainLookupStart-e.fetchStart},{key:"DNS",desc:"DNS查询的耗时",value:e.domainLookupEnd-e.domainLookupStart},{key:"TCP",desc:"TCP连接的耗时",value:e.connectEnd-e.connectStart},{key:"Waiting(TTFB)",desc:"从客户端发起请求到接收到响应的时间 / Time To First Byte",value:e.responseStart-e.requestStart},{key:"Content Download",desc:"下载服务端返回数据的时间",value:e.responseEnd-e.responseStart},{key:"HTTP Total Time",desc:"http请求总耗时",value:e.responseEnd-e.requestStart},{key:"DOMContentLoaded",desc:"dom加载完成的时间",value:e.domContentLoadedEventEnd-e.navigationStart},{key:"Loaded",desc:"页面load的总耗时",value:e.loadEventEnd-e.navigationStart}],o={};return n.forEach(e=>{o[e.key]=e.value}),{raw:e,calcData:o}}function report(e){var n=document.createElement("img"),o=JSON.stringify(e);console.log("【cccc】",e,o,encodeURIComponent(o),o.length),n.src="http://127.0.0.1:3000/zs.gif?data="+encodeURIComponent(o),n.onload=function(){console.log("资源加载成功")}}window.addEventListener("error",(e,n,o)=>{console.log("message: "+e),console.log("url: "+n),console.log("line:"+o)}),window.addEventListener("unload",e=>{navigator.sendBeacon("/base/pageUnload",'{"page": "/xxx", "duration": "12s" }')}),window.addEventListener("load",e=>{console.log("onload");var o;setTimeout(()=>{o=getPerformanceTiming();var n={};["userAgent","platform","language","hardwareConcurrency","deviceMemory","cookieEnabled"].forEach(e=>{n[e]=navigator[e]}),report({perf:o,href:location.href,pathname:location.pathname,navData:n,screen:{size:screen.width+"x"+screen.height,dpr:window.devicePixelRatio,colorDepth:screen.colorDepth},network:navigator.connection.effectiveType,referrer:document.referrer})},0)});